<html>
    <head>
        <style>
            body{
                background-color: black;
                color:white;
            }
            #target{
                width:480px;
                height:480px;
                background-color: green;
            }
            table{
                border-collapse: collapse;
                margin:10px;
                float: left;
                width:200px;
            }
            td, th{
                padding:10px;
                border:1px solid gray;
            }
        </style>
    </head>
    <body>
        <div id="target">
            <img id = "gal" src = "0/test_10_0.png">
        </div>
        <input type="button"  value="head" onclick= changeHTy(this.value)>
        <input type="button"  value="0" onclick= changeHTy(this.value)>
        <input type="button"  value="body" onclick= changeHTy(this.value)>
        <input type="button"  value="arm" onclick= changeHTy(this.value)>
        <input type="button"  value="bike_h" onclick= changeHTy(this.value)>
        <input type="button"  value="bike_b" onclick= changeHTy(this.value)>

        <!-- <table>
            <tr>
                <th>event type</th>
                <th>info</th>
            </tr>
            <tr>
                <td>click</td>
                <td id="elmclick"></td>
            </tr> 
            <tr>
                <td>dblclick</td>
                <td id="elmdblclick"></td>
            </tr>
            <tr>
                <td>mousedown</td>
                <td id="elmmousedown"></td>
            </tr>         
            <tr>
                <td>mouseup</td>
                <td id="elmmouseup"></td>
            </tr>         
            <tr>
                <td>mousemove</td>
                <td id="elmmousemove"></td>
            </tr>         
            <tr>
                <td>mouseover</td>
                <td id="elmmouseover"></td>
            </tr>         
            <tr>
                <td>mouseout</td>
                <td id="elmmouseout"></td>
            </tr>
            <tr>
                <td>contextmenu</td>
                <td id="elmcontextmenu"></td>
            </tr>         
        </table>
        <table>
            <tr>
                <th>key</th>
                <th>info</th>
            </tr>
            <tr>
                <td>event.altKey</td>
                <td id="elmaltkey"></td>
            </tr>
            <tr>
                <td>event.ctrlKey</td>
                <td id="elmctrlkey"></td>
            </tr>
            <tr>
                <td>event.shiftKey</td>
                <td id="elmshiftKey"></td>
            </tr>
        </table> -->
        <table>
            <tr>
                <th>position</th>
                <th>info</th>
            </tr>
            <tr>
                <td>event.clientX</td>
                <td id="elemclientx"></td>
            </tr>
            <tr>
                <td>event.clientY</td>
                <td id="elemclienty"></td>
            </tr>
        </table>
        <table>
            <tr>
                <th>x이미지위치</th>
                <th>y이미지위치</th>
            </tr>
            <tr>
                <td>event.clientX</td>
                <td id="elemclientximg"></td>
            </tr>
            <tr>
                <td>event.clientY</td>
                <td id="elemclientyimg"></td>
            </tr>
        </table>
        <table>
            <tr>
                <th>y/n</th>
                <th>값</th>
            </tr>
            <tr>
                <td>f/n</td>
                <td id="elemclient_TF"></td>
            </tr>
        </table>
        <table>
            <tr>
                <th>유형</th>
                <th>값</th>
            </tr>
            <tr>
                <td>f/n</td>
                <td id="elemclient_TY">0</td>
            </tr>
        </table>
        <script>

            var t = document.getElementById('target');

            function handler(event){
                // var info = document.getElementById('elm'+event.type);
                // var time = new Date();
                // var timestr = time.getMilliseconds();
                // info.innerHTML = (timestr);
                // if(event.altKey){
                //     document.getElementById('elmaltkey').innerHTML = timestr;
                // }
                // if(event.ctrlKey){
                //     document.getElementById('elmctrlkey').innerHTML = timestr;
                // }
                // if(event.shiftKey){
                //     document.getElementById('elmshiftKey').innerHTML = timestr;
                // }
                document.getElementById('elemclientx').innerHTML = event.clientX;
                document.getElementById('elemclienty').innerHTML = event.clientY;
            }

            function nndsf(event){
                if(document.getElementById('elemclient_TF').innerHTML == 'Y'){
                    const b_x = document.getElementById('elemclientximg').innerHTML;
                    const b_y = document.getElementById('elemclientyimg').innerHTML;
                    if(document.getElementById('elemclient_TY').innerHTML == '0'){
                        var mouse_x = Math.floor(event.clientX / 20);
                        var mouse_y = Math.floor(event.clientY / 40 + 1);
                        var elemclient_ty = document.getElementById('elemclient_TY').innerHTML;
                    }else{
                        var mouse_x = Math.floor(event.clientX / 40 );
                        var mouse_y = Math.floor(event.clientY / 80 + 1);
                        var elemclient_ty = document.getElementById('elemclient_TY').innerHTML;
                    }
                    if(b_x != mouse_x || b_y != mouse_y){
                        document.getElementById('elemclientximg').innerHTML = mouse_x;
                        document.getElementById('elemclientyimg').innerHTML = mouse_y;
                        gal.src = elemclient_ty + '/test_' + mouse_y + '_' + mouse_x +'.png';
                    }
                }
            }

            function dblclick(event){
                if(document.getElementById('elemclient_TF').innerHTML == 'Y'){
                    document.getElementById('elemclient_TF').innerHTML = 'N'; 
                }else{
                    document.getElementById('elemclient_TF').innerHTML = 'Y';
                }
            }

            function changeHTy(value){
            document.getElementById('elemclient_TY').innerHTML = value;
            }

            // t.addEventListener('click', handler);

            t.addEventListener('dblclick', dblclick);
            // t.addEventListener('mousedown', handler);
            // t.addEventListener('mouseup', handler);
            t.addEventListener('mousemove', handler);
            t.addEventListener('mousemove', nndsf); 
            
            // t.addEventListener('mouseover', handler);
            // t.addEventListener('mouseout', handler);
            // t.addEventListener('contextmenu', handler);

            
        </script>
    </body>
</html>